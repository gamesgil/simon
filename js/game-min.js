window.Simon={},window.Simon.Game=function(){const a=["red","green","blue","yellow"];let b=[],c=[];return{init:()=>{},getNextSequence:()=>{return b.push(a[Math.floor(4*Math.random())]),c=b.slice(0),b.slice(0)},getFirstAndTrim:()=>{return c.shift()},getLength:()=>c.length,clear:()=>{b=[]}}}(),window.Simon.Controller=function(){function a(){document.getElementById("red").addEventListener("click",c),document.getElementById("green").addEventListener("click",c),document.getElementById("blue").addEventListener("click",c),document.getElementById("yellow").addEventListener("click",c)}function b(){document.getElementById("red").removeEventListener("click",c),document.getElementById("green").removeEventListener("click",c),document.getElementById("blue").removeEventListener("click",c),document.getElementById("yellow").removeEventListener("click",c)}function c(h){const i=Simon.Game.getFirstAndTrim();if(h.target.id===i)Simon.View.play(h.target.id),0===Simon.Game.getLength()&&(b(),setTimeout(function(){Simon.View.playSequence(Simon.Game.getNextSequence())},2e3));else{const j=document.getElementById("lose");j.play(),b(),Simon.Controller.gameOver()}}const f=!1;let g=f;return{init:(h,i)=>{h.init(),i.init()},clickStartButton:()=>{g=!g,g==!0&&Simon.View.playSequence(Simon.Game.getNextSequence())},donePlayingSequence:()=>{a()},gameOver:()=>{g=f,Simon.Game.clear()}}}(),window.Simon.View=function(){return{init:()=>{document.getElementById("red").style.opacity=0,document.getElementById("green").style.opacity=0,document.getElementById("yellow").style.opacity=0,document.getElementById("blue").style.opacity=0,document.getElementById("btn").addEventListener("click",Simon.View.onClickStart)},onClickStart:()=>{Simon.Controller.clickStartButton()},playSequence:a=>{let b;document.querySelector("#simon p").innerText=Simon.Game.getLength(),0<a.length?b=setInterval(function(){Simon.View.play(a[0]),a.splice(0,1),0===a.length&&(clearInterval(b),Simon.Controller.donePlayingSequence())}.bind(this),1e3):clearInterval(b)},play:a=>{let b=`audio[data-color=${a}]`;const c=document.querySelector(b);c.play(),document.getElementById(a).style.opacity=1,setTimeout(function(){document.getElementById(a).style.opacity=0},500)}}}(),window.onload=function(){Simon.Controller.init(Simon.Game,Simon.View)};